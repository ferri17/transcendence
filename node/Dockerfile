
FROM node:22

WORKDIR /home/dtome-pe/node

COPY res/package*.json ./
COPY res/entrypoint.sh ./
COPY . .

# Instala las dependencias de la aplicaci√≥n
RUN npm install

RUN apt-get update && apt-get install -y nginx
RUN mkdir /etc/nginx/ssl/
COPY nginx/nginx.conf /etc/nginx/nginx.conf
COPY nginx/ssl/key.pem /etc/nginx/ssl/key.pem
COPY nginx/ssl/cert.pem /etc/nginx/ssl/cert.pem

RUN chmod +x ./entrypoint.sh

EXPOSE 8000

ENTRYPOINT ["./entrypoint.sh"]
